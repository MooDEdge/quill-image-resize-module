!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ImageResize=t():e.ImageResize=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}o.d(t,"a",function(){return i});var i=function e(t){n(this,e),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=t.overlay,this.img=t.img,this.options=t.options,this.requestUpdate=t.onUpdate}},function(e,t,o){"use strict";t.a={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}}},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.d(t,"a",function(){return s});var l=o(0),s=function(e){function t(){var e,o,r,l;n(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return o=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.onCreate=function(){r.display=document.createElement("div"),Object.assign(r.display.style,r.options.displayStyles),r.overlay.appendChild(r.display)},r.onDestroy=function(){},r.onUpdate=function(){if(r.display&&r.img){var e=r.getCurrentSize();if(r.display.innerHTML=e.join(" &times; "),e[0]>120&&e[1]>30)Object.assign(r.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"==r.img.style.float){var t=r.display.getBoundingClientRect();Object.assign(r.display.style,{right:"auto",bottom:"-"+(t.height+4)+"px",left:"-"+(t.width+4)+"px"})}else{var o=r.display.getBoundingClientRect();Object.assign(r.display.style,{right:"-"+(o.width+4)+"px",bottom:"-"+(o.height+4)+"px",left:"auto"})}}},r.getCurrentSize=function(){return[r.img.width,Math.round(r.img.width/r.img.naturalWidth*r.img.naturalHeight)]},l=o,i(r,l)}return r(t,e),t}(l.a)},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.d(t,"a",function(){return s});var l=o(0),s=function(e){function t(){var e,o,r,l;n(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return o=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.onCreate=function(){r.boxes=[],r.addBox("nwse-resize"),r.addBox("nesw-resize"),r.addBox("nwse-resize"),r.addBox("nesw-resize"),r.positionBoxes()},r.onDestroy=function(){r.setCursor("")},r.positionBoxes=function(){var e=-parseFloat(r.options.handleStyles.width)/2+"px",t=-parseFloat(r.options.handleStyles.height)/2+"px";[{left:e,top:t},{right:e,top:t},{right:e,bottom:t},{left:e,bottom:t}].forEach(function(e,t){Object.assign(r.boxes[t].style,e)})},r.addBox=function(e){var t=document.createElement("div");Object.assign(t.style,r.options.handleStyles),t.style.cursor=e,t.style.width=r.options.handleStyles.width+"px",t.style.height=r.options.handleStyles.height+"px",t.addEventListener("mousedown",r.handleMousedown,!1),r.overlay.appendChild(t),r.boxes.push(t)},r.handleMousedown=function(e){r.dragBox=e.target,r.dragStartX=e.clientX,r.preDragWidth=r.img.width||r.img.naturalWidth,r.setCursor(r.dragBox.style.cursor),document.addEventListener("mousemove",r.handleDrag,!1),document.addEventListener("mouseup",r.handleMouseup,!1)},r.handleMouseup=function(){r.setCursor(""),document.removeEventListener("mousemove",r.handleDrag),document.removeEventListener("mouseup",r.handleMouseup)},r.handleDrag=function(e){if(r.img){var t=e.clientX-r.dragStartX;r.dragBox===r.boxes[0]||r.dragBox===r.boxes[3]?r.img.width=Math.round(r.preDragWidth-t):r.img.width=Math.round(r.preDragWidth+t),r.requestUpdate()}},r.setCursor=function(e){[document.body,r.img].forEach(function(t){t.style.cursor=e})},l=o,i(r,l)}return r(t,e),t}(l.a)},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){if(!y){var e=window.Quill.imports.parchment;h=window.Quill.imports["formats/align"];var t=new e.Attributor.Attribute("nameClass","class",{scope:e.Scope.INLINE});window.Quill.register(t),y=!0}}o.d(t,"a",function(){return g});var s=o(7),a=o.n(s),u=o(6),c=o.n(u),d=o(8),p=o.n(d),f=o(0),h=void 0,y=!1,g=function(e){function t(){var e,o,r,s;n(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return o=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),r.onCreate=function(){l(),r.toolbar=document.createElement("div"),Object.assign(r.toolbar.style,r.options.toolbarStyles),r.overlay.appendChild(r.toolbar),r._defineAlignments(),r._addToolbarButtons()},r.onDestroy=function(){},r.onUpdate=function(){r.overlay.removeChild(r.toolbar),r.onCreate()},r._defineAlignments=function(){r.alignments=[{icon:a.a,class:"ql-image-align-left",apply:function(){var e=Quill.find(r.img).parent;h.remove(e.domNode)},isApplied:function(){var e=Quill.find(r.img).parent;return!h.whitelist.includes(h.value(e.domNode))}},{icon:c.a,class:"ql-image-align-center",apply:function(){var e=Quill.find(r.img).parent;h.add(e.domNode,"center")},isApplied:function(){var e=Quill.find(r.img).parent;return"center"==h.value(e.domNode)}},{icon:p.a,class:"ql-image-align-right",apply:function(){var e=Quill.find(r.img).parent;h.add(e.domNode,"right")},isApplied:function(){var e=Quill.find(r.img).parent;return"right"==h.value(e.domNode)}}]},r._addToolbarButtons=function(){var e=[];r.alignments.forEach(function(t,o){var n=document.createElement("span");n.classList.add(t.class),e.push(n),"function"==typeof t.icon?t.icon(n).then(function(){Object.assign(n.children[0].style,r.options.toolbarButtonSvgStyles)}):(n.innerHTML=t.icon,Object.assign(n.children[0].style,r.options.toolbarButtonSvgStyles)),n.addEventListener("click",function(){if(e.forEach(function(e){return e.style.filter=""}),t.isApplied()){var o=Quill.find(r.img).parent;h.remove(o.domNode)}else r._selectButton(n),t.apply();r.requestUpdate()}),Object.assign(n.style,r.options.toolbarButtonStyles),o>0&&(n.style.borderLeftWidth="0"),t.isApplied()&&r._selectButton(n),r.toolbar.appendChild(n)})},r._selectButton=function(e){e.style.filter="invert(20%)"},s=o,i(r,s)}return r(t,e),t}(f.a)},function(e,t,o){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(void 0===e)return t;if("object"!==(void 0===e?"undefined":f(e))||"object"!==(void 0===t?"undefined":f(t)))return e;for(var o in t)e[o]=l(e[o],t[o]);return e}Object.defineProperty(t,"__esModule",{value:!0});var s=o(1),a=o(2),u=o(4),c=o(3),d=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),p=function e(t,o,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,o);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,n)}if("value"in i)return i.value;var l=i.get;if(void 0!==l)return l.call(n)},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h={DisplaySize:a.a,Toolbar:u.a,Resize:c.a},y=function e(t){var o=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.initializeModules=function(){o.removeModules(),o.modules=o.moduleClasses.map(function(e){return new(h[e]||e)(o)}),o.modules.forEach(function(e){e.onCreate()}),o.onUpdate()},this.onUpdate=function(){o.repositionElements(),o.modules.forEach(function(e){e.onUpdate()})},this.removeModules=function(){o.modules.forEach(function(e){e.onDestroy()}),o.modules=[]},this.handleClick=function(e){if(e.target&&e.target.tagName&&"IMG"===e.target.tagName.toUpperCase()){if(o.img===e.target)return;o.img&&o.hide(),o.show(e.target),e.preventDefault()}else o.img&&o.hide()},this.handleScroll=function(){o.hide()},this.show=function(e){o.img=e,o.showOverlay(),o.initializeModules()},this.showOverlay=function(){o.overlay&&o.hideOverlay(),o.quill.setSelection(null),o.setUserSelect("none"),document.addEventListener("keyup",o.checkImage,!0),o.quill.root.addEventListener("input",o.checkImage,!0),o.overlay=document.createElement("div"),Object.assign(o.overlay.style,o.options.overlayStyles),o.quill.root.parentNode.appendChild(o.overlay),o.repositionElements()},this.hideOverlay=function(){o.overlay&&(o.quill.root.parentNode.removeChild(o.overlay),o.overlay=void 0,document.removeEventListener("keyup",o.checkImage),o.quill.root.removeEventListener("input",o.checkImage),o.setUserSelect(""))},this.repositionElements=function(){if(o.overlay&&o.img){var e=o.quill.root.parentNode,t=o.img.getBoundingClientRect(),n=e.getBoundingClientRect();Object.assign(o.overlay.style,{left:t.left-n.left-1+e.scrollLeft+"px",top:t.top-n.top+e.scrollTop+"px",width:t.width+"px",height:t.height+"px"})}},this.hide=function(){o.hideOverlay(),o.removeModules(),o.img=void 0},this.setUserSelect=function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(t){o.quill.root.style[t]=e,document.documentElement.style[t]=e})},this.checkImage=function(e){window.Quill&&o.img&&(46!=e.keyCode&&8!=e.keyCode||window.Quill.find(o.img).deleteAt(0),o.hide())},this.quill=t,this.options=l(l({},n),s.a),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.addEventListener("mscontrolselect",this.handleClick,!1),this.quill.root.addEventListener("scroll",this.handleScroll,!1),this.quill.on("text-change",this.onUpdate),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]};if(t.default=y,window.Quill){var g=["alt","height","width","style"],m=window.Quill.import("formats/image"),b=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"format",value:function(e,o){g.indexOf(e)>-1?o?this.domNode.setAttribute(e,o):this.domNode.removeAttribute(e):p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,o)}}],[{key:"formats",value:function(e){return g.reduce(function(t,o){return e.hasAttribute(o)&&(t[o]=e.getAttribute(o)),t},{})}}]),t}(m);window.Quill.register(b,!0),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var o=arguments[t];if(null!=o)for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}),window.Quill.register("modules/imageResize",y)}},function(e,t){e.exports='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>\n</svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>\n</svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>\n</svg>'}])});